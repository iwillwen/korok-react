{"version":3,"sources":["webpack://korok-react/webpack/universalModuleDefinition","webpack://korok-react/webpack/bootstrap","webpack://korok-react/./src/index.ts","webpack://korok-react/./src/util.ts","webpack://korok-react/external {\"root\":\"Korok\",\"commonjs2\":\"korok-core\",\"commonjs\":\"korok-core\",\"amd\":\"korok-core\"}"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"korok-core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"korok-react\", [\"korok-core\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"korok-react\"] = factory(require(\"korok-core\"));\n\telse\n\t\troot[\"korok-react\"] = factory(root[\"Korok\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_korok_core__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import Korok from 'korok-core'\nimport { patch } from './util'\n\nexport function registerKorok(key: string) {\n  function decorate<P>(component: React.StatelessComponent<P>): React.ComponentClass<P>\n  function decorate<P, TFunction extends React.ComponentClass<P>>(component: TFunction): TFunction\n  function decorate<P>(component: any) {\n\n    const target = component.prototype || component\n    const korok = new Korok(key)\n\n    Object.defineProperty(target, 'korok', {\n      get() {\n        return korok\n      }\n    })\n\n    patch(target, 'componentWillMount', function() {\n      korok.setProps(this.props)\n      korok.compose(() => {\n        this.forceUpdate()\n      })\n    })\n    patch(target, 'componentDidMount', () => {\n      korok.dispatch()\n    })\n    \n    Korok.register(key, component)\n  \n    return component\n  }\n\n  return decorate\n}","// Copy from mobx-react\n\nlet symbolId = 0\nfunction createSymbol(name: string) {\n  if (typeof Symbol === \"function\") {\n    return Symbol(name)\n  }\n  const symbol = `__$korok-react ${name} (${symbolId})`\n  symbolId++\n  return symbol\n}\n\nconst createdSymbols: any = {}\nexport function newSymbol(name: string) {\n  if (!createdSymbols[name]) {\n    createdSymbols[name] = createSymbol(name)\n  }\n  return createdSymbols[name]\n}\n\nconst korokMixins = newSymbol(\"patchMixins\")\nconst korokPatchedDefinition = newSymbol(\"patchedDefinition\")\n\nfunction getMixins(target: any, methodName: string) {\n  const mixins = (target[korokMixins] = target[korokMixins] || {})\n  const methodMixins = (mixins[methodName] = mixins[methodName] || {})\n  methodMixins.locks = methodMixins.locks || 0\n  methodMixins.methods = methodMixins.methods || []\n  return methodMixins\n}\n\nfunction wrapper(realMethod: any, mixins: any, ...args: any[]) {\n  // locks are used to ensure that mixins are invoked only once per invocation, even on recursive calls\n  mixins.locks++\n\n  try {\n    let retVal\n    if (realMethod !== undefined && realMethod !== null) {\n      retVal = realMethod.apply(this, args)\n    }\n\n    return retVal\n  } finally {\n    mixins.locks--\n    if (mixins.locks === 0) {\n      mixins.methods.forEach((mx: any) => {\n        mx.apply(this, args)\n      })\n    }\n  }\n}\n\nfunction wrapFunction(realMethod: any, mixins: any) {\n  const fn = function(...args: any[]) {\n    wrapper.call(this, realMethod, mixins, ...args)\n  }\n  return fn\n}\n\nexport function patch(target: any, methodName: string, ...mixinMethods: any[]) {\n  const mixins = getMixins(target, methodName)\n\n  for (const mixinMethod of mixinMethods) {\n    if (mixins.methods.indexOf(mixinMethod) < 0) {\n      mixins.methods.push(mixinMethod)\n    }\n  }\n\n  const oldDefinition: any = Object.getOwnPropertyDescriptor(target, methodName)\n  if (oldDefinition && oldDefinition[korokPatchedDefinition]) {\n    // already patched definition, do not repatch\n    return\n  }\n\n  const originalMethod = target[methodName]\n  const newDefinition = createDefinition(\n    target,\n    methodName,\n    oldDefinition ? oldDefinition.enumerable : undefined,\n    mixins,\n    originalMethod\n  )\n\n  Object.defineProperty(target, methodName, newDefinition)\n}\n\nfunction createDefinition(target: any, methodName: string, enumerable: boolean, mixins: any, originalMethod: any) {\n  let wrappedFunc = wrapFunction(originalMethod, mixins)\n\n  return {\n    [korokPatchedDefinition]: true,\n    get: function() {\n      return wrappedFunc\n    },\n    set: function(value: any) {\n      if (this === target) {\n        wrappedFunc = wrapFunction(value, mixins)\n      } else {\n        // when it is an instance of the prototype/a child prototype patch that particular case again separately\n        // since we need to store separate values depending on wether it is the actual instance, the prototype, etc\n        // e.g. the method for super might not be the same as the method for the prototype which might be not the same\n        // as the method for the instance\n        const newDefinition = createDefinition(this, methodName, enumerable, mixins, value)\n        Object.defineProperty(this, methodName, newDefinition)\n      }\n    },\n    configurable: true,\n    enumerable: enumerable\n  }\n}","module.exports = __WEBPACK_EXTERNAL_MODULE_korok_core__;"],"sourceRoot":""}